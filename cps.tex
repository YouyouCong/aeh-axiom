\subsection{CPS Translation}

\begin{defn}
\begin{array}{rcl}
  \cpsv{x} & = & x \\
  \cpsv{\absp{x}{e}} & = & \abs{x}{\cpsc{e}} \\
  \cpsc{\retp{v}} & = & \abstwo{k}{h}{\apptwo{k}{v}{h}} \\
  \cpsc{\appp{v_1}{v_2}} & = & \app{\cpsv{v_1}}{\cpsv{v_2}} \\
  \cpsc{\letinp{x}{e_1}{e_2}} & = & 
    \abstwo{k}{h}
           {\apptwo{\cpsc{e_1}}
                   {\abstwop{x}{h}{\apptwo{\cpsc{e_2}}{k}{h}}}
                   {h}} \\
  \cpsc{\opp{v}} & = & 
    \abstwo{k}{h}{\apphand{h}{v}{k}} \\
  \cpsc{\handlep{e}{h}} & = & 
    \apptwo{\cpsc{e}}
           {\absp{x}{\cpsc{\eret}}}
           {\abstwop{x}{r}{\cpsc{\eop}}} \\
  \ \\
  \cpsf{[]} & = &
    \abs{k}{k} \\
  \cpsf{\letin{x}{F}{e}} & = &
    \abs{k}{\abstwop{x}{h}{\apptwo{\cpsc{e}}{\appp{\cpsf{F}}{k}}{h}}}
\end{array}
\end{defn}

\endinput

op v (\y. e)

~>

\kh. h v+ (\y. e÷ k h)

----------------------

let x = ret v in e

\kh. (\xh. e÷ k h) v+ h

[] ~> \k. k
let x = F in e ~> \k. F÷ (\xh. e÷ k h)

F[e]÷ = \kh. e÷ (F÷ k) h